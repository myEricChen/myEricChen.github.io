(()=>{"use strict";var s,n={362:(e,t,n)=>{n.d(t,{Z:()=>i});var s=n(405);class o extends s.Z{get prototypes(){return{component:this.app.objectContainer.get("Filter/Component/Prototypes"),urlNavigation:this.app.objectContainer.get("Project/URLNavigation/Prototypes")}}get register(){return{components:this.app.objectContainer.get("Filter/Components"),entityTypes:this.app.objectContainer.get("Entity/Register"),productsQueryVars:this.app.objectContainer.get("ProductsQueryVars"),productsLoopProperties:this.app.objectContainer.get("ProductsLoopProperties")}}get builders(){return{component:this.app.componentRegister.get("Filter/Builder/Component")}}get componentBuilder(){return this.app.objectContainer.get("ComponentBuilder")}get entityCollector(){return this.app.componentRegister.get("Entity/Collector")}get localizedMessages(){return this.app.objectContainer.get("Messages")}get appSelectors(){return this.app.objectContainer.get("Selectors")}get filterPackage(){return this.app.packageRegister.get("Filter/Package")}get wooData(){return this.app.objectContainer.get("WooData")}}const i=o},694:(e,t,n)=>{n.d(t,{Z:()=>c});var i=n(362),s=n(841),o=n(203),a=n(937),r=n(718);class c extends i.Z{constructor(){super(),this.initEvent=new s.Z,this.productPageLoadedEvent=new s.Z,this.beforeLoadingProductPageEvent=new s.Z,this.afterLoadingProductPageEvent=new s.Z,this.applyFilterValueEvent=new s.Z,this.removeFilterValueEvent=new s.Z,this.productPageRequest=null,this.activeFilters={},this.componentKeys=new Map,this.enabledFilters=0}get projectId(){return this.projectComponent.entity.entityId}get projectOptions(){return this.projectComponent.options}initialProperties(){this.pageUrl=this.app.objectContainer.get("PageUrl"),this.urlNavigator=this.componentBuilder.build(r.Z,this.package),this.urlNavigator.navigationOptions=(0,o.Z)(this.urlNavigator.navigationOptions,this.projectOptions.get("urlNavigationOptions"))}attachEvents(e){e.addSystemHandler(this.initEvent,this.onInit),this.app.objectContainer.get("IsPaged")&&this.eventManager.addSystemHandler(this.beforeLoadingProductPageEvent,this.resetPaginationUrl)}resetPaginationUrl(){let e=this.urlNavigator.getAllAttributes();e&&e.hasOwnProperty("product-page")&&delete e["product-page"],e&&e.hasOwnProperty("paged")&&delete e.paged;let t=this.urlNavigator.setAllAttributesToUrl(this.pageUrl,e);this.replacePageUrl(t),this.eventManager.removeSystemHandler(this.beforeLoadingProductPageEvent,this.resetPaginationUrl)}onInit(){this.eachComponents(e=>{if(!("getFilterKeys"in e))return;let t=e.getFilterKeys();for(let n of Object.values(t)){if(this.urlNavigator.hasAttribute(n)){let t=this.urlNavigator.getAttribute(n);this.activeFilters[n]=t,this.applyFilterValueEvent.trigger({filterComponent:e,filterKey:n,value:t})}this.componentKeys.set(n,e)}e.componentElement.length&&!e.componentElement.hasClass("wcpf-status-disabled")&&(this.enabledFilters+=1)});let e=Object.keys(this.activeFilters);e.push("product-page"),e.push("paged"),this.pageUrl=this.urlNavigator.removeAllAttributesFromUrl(this.pageUrl,e),this.enabledFilters||this.projectComponent.componentElement.add(this.projectComponent.componentElement.parents(".widget")).addClass("wcpf-all-filters-disabled")}removeFilterValue(e,t){this.activeFilters.hasOwnProperty(t)&&(delete this.activeFilters[t],this.removeFilterValueEvent.trigger({filterComponent:e,filterKey:t}),"auto"==this.projectOptions.get("filteringStarts")&&(this.urlNavigator.removeAttribute(t),this.applyFilters()))}applyFilterValue(e,t,n){this.activeFilters[t]=n,this.applyFilterValueEvent.trigger({filterComponent:e,filterKey:t,value:n}),"auto"==this.projectOptions.get("filteringStarts")&&(this.urlNavigator.setAttribute(t,n),this.applyFilters())}resetFilters(){for(let e in this.activeFilters)this.activeFilters.hasOwnProperty(e)&&(this.urlNavigator.removeAttribute(e),this.componentKeys.has(e)&&this.removeFilterValueEvent.trigger({filterComponent:this.componentKeys.get(e),filterKey:e}));this.activeFilters={},this.applyFilters()}applyFilters(e){if(e=(0,o.Z)({updateFiltersElements:!0,applyAttributes:!0},"object"==typeof e?e:{}),"auto"!=this.projectOptions.get("filteringStarts")&&e.applyAttributes){for(let e in this.urlNavigator.getAllAttributes())this.componentKeys.has(e)&&!this.activeFilters.hasOwnProperty(e)&&this.urlNavigator.removeAttribute(e);for(let e in this.activeFilters)this.activeFilters.hasOwnProperty(e)&&this.urlNavigator.setAttribute(e,this.activeFilters[e])}this.productPageRequest&&this.productPageRequest.abort(),this.beforeLoadingProductPageEvent.trigger({filters:this.activeFilters,project:this}),this.app.windowElement.trigger("wcpf_before_ajax_filtering"),this.productPageRequest=jQuery.ajax({url:location.href,type:"GET"}).done(t=>{let n=document.implementation.createHTMLDocument(document.title);n.documentElement.innerHTML=t,e.updateFiltersElements&&this.updateComponentElementsFromPage(n),this.productPageLoadedEvent.trigger({page:n,filters:this.activeFilters,project:this}),this.app.windowElement.trigger("wcpf_update_products");let s=window.WCPFData.scriptAfterProductsUpdate;s&&s.length&&eval(s)}).always(()=>{this.afterLoadingProductPageEvent.trigger({filters:this.activeFilters,project:this}),this.app.windowElement.trigger("wcpf_after_ajax_filtering")})}goToPageNumberByUrl(e){this.eventManager.removeSystemHandler(this.beforeLoadingProductPageEvent,this.resetPaginationUrl),this.replacePageUrl(e),this.applyFilters({updateFiltersElements:!1,applyAttributes:!1}),this.eventManager.addSystemHandler(this.beforeLoadingProductPageEvent,this.resetPaginationUrl)}applySortingToProducts(e){this.urlNavigator.setAttribute("orderby",e),this.applyFilters({updateFiltersElements:!1,applyAttributes:!1})}replacePageUrl(e){window.history.replaceState({},document.title,e)}eachComponents(e){let t=n=>{e(n);for(let e in n.childFilterComponents)n.childFilterComponents.hasOwnProperty(e)&&t(n.childFilterComponents[e])};t(this.projectComponent)}updateComponentElementsFromPage(e){let t=(0,a.Z)(e.documentElement).find(`.wcpf-front-element-${this.projectId}`);this.projectComponent.replaceComponentElementKeepFocus(t.first()),this.projectComponent.componentElement=this.app.bodyElement.find(`.wcpf-front-element-${this.projectId}`),this.eachComponents(e=>{e.entity.entityId!=this.projectId&&(e.componentElement=this.projectComponent.componentElement.find(`.wcpf-front-element-${e.entity.entityId}`))}),this.eachComponents(e=>{e.componentElement.length&&(e.initialPropertiesOfElement(),e.attachElementEvents(e.eventManager))})}}},718:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(362);class o extends s.Z{constructor(){super(...arguments),this.navigationOptions={}}attachEvents(){}}const i=o;class a extends i{initialProperties(){super.initialProperties(),this.urlParams=new Map,this.updateUrlParams()}updateUrlParams(){this.urlParams.clear();let t=location.search.substring(1),e=t.split("&");if(t.length)for(let n in e){if(!e.hasOwnProperty(n))continue;let t=e[n].split("=");this.urlParams.set(t[0],t.length>1?this.decode(t[1]):0[0])}}hasAttribute(e){return this.urlParams.has(e)}getAttribute(e){return this.urlParams.get(e)}setAttribute(e,t){this.updateUrlParams(),this.urlParams.set(e,t),this.updateUrl()}removeAttribute(e){this.updateUrlParams(),this.urlParams.delete(e),this.updateUrl()}updateUrl(){let e=[];for(let[t,n]of this.urlParams.entries())n==null?e.push(this.encode(t)):e.push(this.encode(t)+"="+this.encode(n));let t=location.pathname+location.hash;e.length&&(t="?"+e.join("&")),window.history.replaceState({},document.title,t)}decode(e){return-1!==(e=decodeURIComponent(e)).indexOf(",")?e.split(","):e}encode(e){return Array.isArray(e)?e.join(","):e}setAllAttributesToUrl(e,t){let s="";-1!=e.indexOf("?")&&(s=e.slice(e.indexOf("?")+1),e=e.slice(0,e.indexOf("?")));let n={},o=-1!=s.indexOf("&")?s.split("&"):[],i=[];for(let e in o){if(!o.hasOwnProperty(e))continue;let t=o[e].split("=");n[t[0]]=this.decode(t[1])}for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);for(let e in n){if(!n.hasOwnProperty(e))continue;let t=n[e];i.push(this.encode(e)+"="+this.encode(t))}return i.length&&(e+="?"+i.join("&")),e}removeAllAttributesFromUrl(e,t){if(-1==e.indexOf("?"))return e;let i=e.slice(e.indexOf("?")+1);if(!i.length)return e;e=e.slice(0,e.indexOf("?"));let n={},s=i.split("&"),o=[];for(let e in s){if(!s.hasOwnProperty(e))continue;let t=s[e].split("=");n[t[0]]=this.decode(t[1])}for(let e in t){if(!t.hasOwnProperty(e))continue;let s=t[e];n.hasOwnProperty(s)&&delete n[s]}for(let e in n){if(!n.hasOwnProperty(e))continue;let t=n[e];o.push(this.encode(e)+"="+this.encode(t))}return o.length&&(e+="?"+o.join("&")),e}getAllAttributes(){this.updateUrlParams();let e={};for(let[t,n]of this.urlParams.entries())e[t]=n;return e}}},841:(e,t,n)=>{n.d(t,{Z:()=>s});class s{constructor(){this.defaultContext=null,this.callbacks=[]}subscribe(e,t){!t&&this.defaultContext&&(t=this.defaultContext),t||(t=e);let n=this,s={callback:e,event:n,unsubscribe:function(){n.unsubscribe(e)}};return this.callbacks.push({callback:e,subscriber:t}),s}unsubscribe(e,t){!t&&this.defaultContext&&(t=this.defaultContext),t||(t=e);let n=[];for(let s=0;s<this.callbacks.length;s++)this.callbacks[s].callback!==e&&this.callbacks[s].subscriber!==t&&n.push(this.callbacks[s]);this.callbacks=n}trigger(e,t){for(let n=0;n<this.callbacks.length;n++)this.callbacks[n].callback.apply(this.callbacks[n].subscriber,[e,t])}}},405:(e,t,n)=>{n.d(t,{Z:()=>o});var s=n(251);const o=class{constructor(e){this.eventManager=e||new s.Z(this)}get app(){return this.package.app}initialProperties(){}}},251:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(937),i=n(777),o=n(149);class a{constructor(e){this.component=e,this.rootElement=(0,s.Z)(document.documentElement)}addWindowHandler(e,t,n){this.applyElementHandler(!0,{element:(0,s.Z)(window),event:e,eventSelector:null,eventHandler:t,context:n})}removeWindowHandler(e,t,n){this.applyElementHandler(!1,{element:(0,s.Z)(window),event:e,eventSelector:null,eventHandler:t,context:n})}addSystemHandler(e,t,n){n=this.getContext(n),e.subscribe(t,n)}removeSystemHandler(e,t,n){n=this.getContext(n),e.unsubscribe(t,n)}addElementHandler(e,t,n,s,o){this.applyElementHandler(!0,{element:e,event:t,eventSelector:n,eventHandler:s,context:o})}removeElementHandler(e,t,n,s,o){this.applyElementHandler(!1,{element:e,event:t,eventSelector:n,eventHandler:s,context:o})}applyElementHandler(e,t){t.context=this.getContext(t.context),t.eventSelector instanceof Function&&!t.eventHandler&&(t.eventHandler=t.eventSelector,t.eventSelector=""),t.context&&(t.eventHandler=(0,o.Z)(t.eventHandler,t.context)),t.element instanceof Element&&(t.element=jQuery(t.element)),e?t.eventSelector?t.element.on(t.event,t.eventSelector,t.eventHandler):t.element.on(t.event,t.eventHandler):t.eventSelector?t.element.off(t.event,t.eventSelector,t.eventHandler):t.element.off(t.event,t.eventHandler)}getContext(e){return!e&&this.component&&(e=this.component),e}addEntityHandler(e,t,n,s,a){let c="",r=n;"string"==typeof n&&s instanceof Function&&(c=n,r=s),a||!s||s instanceof Function||(a=s),(a=this.getContext(a))&&(r=(0,o.Z)(r,a));let l=(0,i.Z)(e,c);this.rootElement.on(t,l,r)}removeEntityHandler(e,t,n,s,a){let c="",r=n;"string"==typeof n&&s instanceof Function&&(c=n,r=s),a||!s||s instanceof Function||(a=s),(a=this.getContext(a))&&(r=(0,o.Z)(r,a));let l=(0,i.Z)(e,c);this.rootElement.off(t,l,r)}addComponentHandler(e,t,n,s){this.addEntityHandler(this.component,e,t,n,s)}removeComponentHandler(e,t,n,s){this.removeEntityHandler(this.component,e,t,n,s)}addPackageHandler(e,t,n,s){this.addEntityHandler(this.component.package,e,t,n,s)}removePackageHandler(e,t,n,s){this.removeEntityHandler(this.component.package,e,t,n,s)}addPageElementHandler(e,t,n,s){this.applyElementHandler(!0,{element:this.rootElement,event:e,eventSelector:t,eventHandler:n,context:s})}removePageElementHandler(e,t,n,s){this.applyElementHandler(!1,{element:this.rootElement,event:e,eventSelector:t,eventHandler:n,context:s})}}},937:(e,t,n)=>{function s(e){return jQuery(e)}n.d(t,{Z:()=>s})},777:(e,t,n)=>{function s(e,t){let n="";for(;;){let t=e.getParentEntity();if(!e.rootSelector){if(t){e=t;continue}break}if(n=0==n.length?e.rootSelector:e.rootSelector+" "+n,!t)break;e=t}return t&&(0==n.length?n=t:n+=" "+t),n}n.d(t,{Z:()=>s})},149:(e,t,n)=>{function s(e,t){return jQuery.proxy(e,t)}n.d(t,{Z:()=>s})},203:(e,t,n)=>{function s(e,t){return jQuery.extend(e,t)}n.d(t,{Z:()=>s})}},t={};function e(s){var o,i=t[s];return 0[0]!==i?i.exports:(o=t[s]={exports:{}},n[s](o,o.exports,e),o.exports)}e.d=(t,n)=>{for(var s in n)e.o(n,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:n[s]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s={},(()=>{t=e(937);class pe{constructor(){this.objectContainer=new Map,this.componentRegister=new Map,this.packageRegister=new Map}get bodyElement(){return(0,t.Z)(document.body)}get windowElement(){return(0,t.Z)(window)}initialization(){}}l=e(841);const n=class{constructor(){this.componentList=new Set,this.subpackageList=new Set,this.collectAfter=new l.Z}initialProperties(){}getInitialSubpackages(){return[]}};class R{buildByClass(e,t,n){let s=this.createPackageByClass(e,t,n);return this.build(s,t,n)}build(e,t,n){return e.app=t,e.parentPackage=n,this.createInteraction(e,t,n),this.afterInteractionBuilding(e,t),this.packageInitialProperties(e),this.packageAttachEvents(e),e.collectAfter.trigger(e),e}packageAttachEvents(e){e.componentList.forEach(e=>{e.attachEvents(e.eventManager)}),e.subpackageList.forEach(e=>{this.packageAttachEvents(e)})}packageInitialProperties(e){e.initialProperties(),e.componentList.forEach(e=>{e.initialProperties()}),e.subpackageList.forEach(e=>{this.packageInitialProperties(e)})}createInteraction(e,t){let o=e.getInitialSubpackages(),i=e.getInitialComponents();i&&i.forEach(t=>{t.package=e,e.componentList.add(t)}),o&&(o.forEach(s=>{let o=null;s instanceof n?(o=s,o.app=t,o.parentPackage=e):o=this.createPackageByClass(s,e.app,e),e.subpackageList.add(o)}),e.subpackageList.forEach(e=>{this.createInteraction(e,e.app,e.parentPackage)}))}createPackageByClass(e,t,s){if(!(e.prototype instanceof n))throw new TypeError('Ð¡lass does not implement class "PackageAbstract"');let o=new e;return o.app=t,o.parentPackage=s,o}afterInteractionBuilding(e,t){e.afterInteractionBuilding&&e.afterInteractionBuilding(t),e.componentList.size&&e.componentList.forEach(e=>{e.afterInteractionBuilding&&e.afterInteractionBuilding(t)}),e.subpackageList.size&&e.subpackageList.forEach(e=>{this.afterInteractionBuilding(e,t)})}}class L{build(e,t){let n=new e;return t&&this.implementation(n,t),n}implementation(e,t){e.package=t,e.initialProperties(),e.attachEvents(e.eventManager)}}var t,s,c,l,d,m,f,v=e(405),u=e(203);class g{}!function(e){e.remove="remove",e.virtual="virtual",e.published="published"}(d||(d={}));const h=d;class D extends v.Z{get register(){return this.app.objectContainer.get("Entity/Register")}initialProperties(){this.app.componentRegister.set("Entity/Collector",this)}attachEvents(){}collectVirtualEntityByKey(e){let t=null;if(!this.register.has(e))throw new Error(`Entry by key '${e}' in register not found`);let n=this.register.get(e);return t=new g,t.status=h.virtual,t.entityId=this.createUniqueID(),t.parentId=0,t.entityKey=n.id,t.order=0,t.options=(0,u.Z)({},n.defaultOptions),t.title=n.label,t.childEntities=[],t}collectEntityByStructure(e){let t=null;if(t=new g,t.status=h.published,t.entityId=e.entityId,t.parentId=e.parentId,t.entityKey=e.entityKey,t.order=Number(e.order),t.options=(0,u.Z)({},e.options),t.title=e.title,t.childEntities=[],e.childEntities&&e.childEntities.hasOwnProperty("length")&&e.childEntities.length)for(let n in e.childEntities){if(!e.childEntities.hasOwnProperty(n))continue;let s=e.childEntities[n],o=this.collectEntityByStructure(s);t.childEntities.push(o)}return t}createUniqueID(){let e=()=>Math.random().toString(16).slice(-4);return"virtual-"+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}class F extends n{initialProperties(){let e=new Map;this.app.objectContainer.set("Entity/Register",e)}getInitialComponents(){return[new D]}}f=e(718);class C extends n{initialProperties(){this.app.objectContainer.set("Project/URLNavigation/Prototypes",new Map([["query",f.Z]]))}getInitialComponents(){return[]}}s=e(362);class x extends v.Z{constructor(e){super(),e&&(e instanceof Element&&(e=jQuery(e)),this.componentElement=e)}addElementHandler(e,t,n,s){this.eventManager.addElementHandler(this.componentElement,e,t,n,s)}removeElementHandler(e,t,n,s){this.eventManager.removeElementHandler(this.componentElement,e,t,n,s)}replaceComponentElementKeepFocus(e){const t=this.buildFocusedElementSelector();this.componentElement.replaceWith(e),this.refocusElement(t)}buildFocusedElementSelector(){const e=[];let t=document.activeElement;for(;t&&t!==document.body&&"div.wcpf-filter"!==e[e.length-1];)e.push(this.buildSelector(t)),t=t.parentElement;return 0===e.length?null:e.reverse().join(" > ")}buildSelector(e){return e.tagName.toLowerCase()+Array.from(e.attributes).map(t=>{if("class"===t.name.toLowerCase()){const e=t.value.replace(" ui-state-focus","");return`[${t.name}*="${e}"]`}if("style"===t.name.toLowerCase()&&e.classList.contains("ui-slider-handle")){const e=t.value.replace(/(\d+)\.?\d*%;/g,"$1");return`[${t.name}*="${e}"]`}if("style"!==t.name.toLowerCase())return`[${t.name}="${t.value.replace(/"/g,'\\"')}"]`}).join("")}refocusElement(e){if(null===e)return;let t=0;const n=function(){t++;try{const t=document.querySelector(e);t&&(t.focus(),clearInterval(s))}catch{}t>=20&&clearInterval(s)},s=setInterval(n,50);n()}}const w=x,j=class extends w{get prototypes(){return{component:this.app.objectContainer.get("Filter/Component/Prototypes"),urlNavigation:this.app.objectContainer.get("Project/URLNavigation/Prototypes")}}get register(){return{components:this.app.objectContainer.get("Filter/Components"),entityTypes:this.app.objectContainer.get("Entity/Register"),productsQueryVars:this.app.objectContainer.get("ProductsQueryVars"),productsLoopProperties:this.app.objectContainer.get("ProductsLoopProperties")}}get builders(){return{component:this.app.componentRegister.get("Filter/Builder/Component")}}get componentBuilder(){return this.app.objectContainer.get("ComponentBuilder")}get entityCollector(){return this.app.componentRegister.get("Entity/Collector")}get localizedMessages(){return this.app.objectContainer.get("Messages")}get appSelectors(){return this.app.objectContainer.get("Selectors")}get filterPackage(){return this.app.packageRegister.get("Filter/Package")}get wooData(){return this.app.objectContainer.get("WooData")}};c=e(149);class U{constructor(){this.observers=new Map}add(e,t,n){this.observers.has(e)||this.observers.set(e,[]),t=n?(0,c.Z)(t,n):t,this.observers.get(e).push(t)}remove(e,t,n){this.observers.has(e)&&(t=n||(0,c.Z)(t,this),this.observers.get(e).filter(e=>e!==t))}notify(e,t,n){this.observers.has(e)&&this.observers.get(e).forEach(s=>{s(t,n,e)})}}function a(e,t,n){if("string"==typeof t)return a(e,t.split("."),n);if(1==t.length&&0[0]!==n)return e[t[0]]=n;if(0==t.length)return s=e,JSON.parse(JSON.stringify(s));if(!e.hasOwnProperty(t[0])){if(0[0]===n)return;e[t[0]]={}}return a(e[t[0]],t.slice(1),n);var s}class O{constructor(e){this.observable=new U,e&&(this.container=e)}has(e){return 0[0]!==a(this.container,e)}get(e){return a(this.container,e)}set(e,t){let n=this.has(e)?this.get(e):null;a(this.container,e,t),"string"==typeof e&&e.split(".").length&&(e=e.split(".")[0]),this.observable.notify(e,t,n)}}class r extends j{constructor(){super(),this.options=new O,this.childFilterComponents=[],this.componentState=new Map}initialProperties(){this.options.container=this.entity.options,this.initialPropertiesOfElement()}attachEvents(e){this.attachElementEvents(e)}initialPropertiesOfElement(){}attachElementEvents(){}get activeComponentElement(){if(this.componentElement.length>1){let e=this.componentElement.filter(":visible");return e.each((t,n)=>{let s=jQuery(n);if("visible"==s.css("visibility"))return e=s,!1}),e}return this.componentElement}}function p(e,t){for(let n in e){if(e.hasOwnProperty(n)!==t.hasOwnProperty(n))return!1;let s=typeof e[n];if("object"==s){if(!p(e[n],t[n]))return!1}else if("function"==s){if(0[0]===t[n]||e[n].toString()!=t[n].toString())return!1}else if(e[n]!=t[n])return!1}for(let n in t)if(0[0]===e[n])return!1;return!0}function E(e,t){return Object.getPrototypeOf(e)===Object.getPrototypeOf(t)&&0[0]!==e.length&&e.length===t.length&&Array.prototype.every.call(e,(e,n)=>e===t[n])}class k extends j{get notesListElement(){return this.componentElement.find(".wcpf-note-list")}get notesItemsElement(){return this.notesListElement.find(".wcpf-note-item")}attachEvents(e){e.addElementHandler(this.componentElement,"click",".remove-filter",this.onRemoveFilterClick),this.eventManager.addSystemHandler(this.project.applyFilterValueEvent,this.onApplyFilterValue),this.eventManager.addSystemHandler(this.project.removeFilterValueEvent,this.onRemoveFilterValue)}onRemoveFilterValue(e){const n=e.filterComponent;this.notesItemsElement.each((e,s)=>{const o=(0,t.Z)(s),i=o.data("wcpf-note-entry");n.entity.entityId==i.filterComponent.entity.entityId&&o.remove()})}onApplyFilterValue(e){const n=e.filterComponent;"collectFilterNotes"in n&&this.notesListElement.each((s,o)=>{const i=n.collectFilterNotes(e.value,e.filterKey),a=!i.length;jQuery(o).find(".wcpf-note-item").each((e,s)=>{const c=(0,t.Z)(s),o=c.data("wcpf-note-entry");let r=-1;if(n.entity.entityId==o.filterComponent.entity.entityId){for(const[n,e]of i.entries()){if(typeof e.filterValue!=typeof o.filterValue)continue;let t=!1;if(t=!!Array.isArray(e.filterValue)&&!!E(e.filterValue,o.filterValue)||"object"==typeof e.filterValue&&!!p(e.filterValue,o.filterValue)||e.filterValue==o.filterValue,t&&e.mark==o.mark){r=n;break}}-1==r||a?c.remove():i.splice(r,1)}});for(const e of i.values())this.addEntry(e)})}onRemoveFilterClick(e){const n=function(e){return jQuery(e.currentTarget)}(e),t=n.parents(".wcpf-note-item:first").data("wcpf-note-entry");t&&t.filterComponent&&"removeFilterValueByFilterNote"in t.filterComponent&&t.filterComponent.removeFilterValueByFilterNote(t)}addEntry(e){const n=(0,t.Z)(`
            <div class="wcpf-note-item">
                <span class="note-text">${e.text}</span>
                <button class="remove-filter"></button>
            </div>
        `);n.data("wcpf-note-entry",e),this.notesListElement.append(n)}}class A extends r{initialProperties(){super.initialProperties(),this.productsElement=null,this.getNotesElement()&&(this.filterNotes=this.componentBuilder.build(k),this.filterNotes.project=this.project,this.filterNotes.componentElement=this.getNotesElement(),this.componentBuilder.implementation(this.filterNotes,this.package))}attachEvents(e){super.attachEvents(e),e.addSystemHandler(this.project.beforeLoadingProductPageEvent,this.beforeLoadingProductPage),e.addSystemHandler(this.project.afterLoadingProductPageEvent,this.afterLoadingProductPage),e.addSystemHandler(this.project.productPageLoadedEvent,this.onProductPageLoaded),this.attachEventsToPageParts(e)}attachEventsToPageParts(e){this.options.get("paginationAjax")&&-1!=this.options.get("useComponents").indexOf("pagination")&&this.getPaginationElement()&&e.addElementHandler(this.getPaginationElement(),"click","a",this.onPaginationClick),this.options.get("sortingAjax")&&-1!=this.options.get("useComponents").indexOf("sorting")&&this.getSortingElement()&&(e.addElementHandler(this.getSortingElement(),"submit",this.onSortingSubmit),e.addElementHandler(this.getSortingElement(),"change",".orderby",this.onSortingChange))}getThemePartSelector(e){return this.app.objectContainer.has("ThemeSelectors")&&this.app.objectContainer.get("ThemeSelectors").hasOwnProperty(e)?this.app.objectContainer.get("ThemeSelectors")[e]:null}getBreadcrumbSelectors(){return[this.options.get("breadcrumbSelector"),this.appSelectors.breadcrumb]}getSortingSelectors(){let e=[this.options.get("sortingSelector"),this.appSelectors.sorting];return this.getThemePartSelector("sorting")&&e.push(this.getThemePartSelector("sorting")),e}getResultCountSelectors(){let e=[this.options.get("resultCountSelector"),this.appSelectors.resultCount];return this.getThemePartSelector("resultCount")&&e.push(this.getThemePartSelector("resultCount")),e}getPaginationSelectors(){let e=[this.options.get("paginationSelector"),this.appSelectors.paginationContainer];return this.getThemePartSelector("paginationContainer")&&e.push(this.getThemePartSelector("paginationContainer")),e}getProductsSelectors(){let e=[`.wcpf-products-container-${this.entity.entityId}`,this.options.get("productsContainerSelector"),this.appSelectors.productsContainer];return this.options.get("multipleContainersForProducts")&&(e[0]+=","+this.options.get("productsContainerSelector")),e}getNotesSelectors(){return[`.wcpf-filter-notes-${this.entity.entityId}`,".wcpf-filter-notes-default"]}getPageTitleSelectors(){return[this.options.get("pageTitleSelector"),this.appSelectors.pageTitle]}getBreadcrumbElement(){return this.findElementBySelectors(this.getBreadcrumbSelectors())}getNotesElement(){return this.findElementBySelectors(this.getNotesSelectors())}getPaginationElement(){return this.findElementBySelectors(this.getPaginationSelectors())}getSortingElement(){return this.findElementBySelectors(this.getSortingSelectors())}getResultCountElement(){return this.findElementBySelectors(this.getResultCountSelectors())}getPageTitleElement(){return this.findElementBySelectors(this.getPageTitleSelectors())}getProductsElement(){return this.productsElement?this.productsElement:this.findElementBySelectors(this.getProductsSelectors())}setProductsElement(e){this.productsElement=e}beforeLoadingProductPage(){jQuery.blockUI({message:null})}afterLoadingProductPage(){jQuery.unblockUI()}prepareComponentElement(e,t,n){"pagination"==e&&t.attr("style")&&!n.attr("style")&&n.attr("style",t.attr("style"))}onProductPageLoaded(e){let s=(0,t.Z)(e.page.documentElement),o=this.options.get("useComponents"),i=[{selectors:this.getPaginationSelectors(),componentKey:"pagination",element:this.getPaginationElement()},{selectors:this.getResultCountSelectors(),componentKey:"results-count",element:this.getResultCountElement()},{selectors:this.getSortingSelectors(),componentKey:"sorting",element:this.getSortingElement()},{selectors:this.getPageTitleSelectors(),componentKey:"page-title",element:this.getPageTitleElement()},{selectors:this.getBreadcrumbSelectors(),componentKey:"breadcrumb",element:this.getBreadcrumbElement()}];for(let e of i.values())if(-1!=o.indexOf(e.componentKey)&&e.element)if(e.element.html(""),-1!=e.selectors[0].indexOf(",")){let t=e.selectors[0].split(",");for(let n in t){if(!t.hasOwnProperty(n))continue;let o=this.findElementBySelectors([t[n]],s),i=this.findElementBySelectors([t[n]]);i&&o&&(this.prepareComponentElement(e.componentKey,i,o.first()),i.replaceWith(o.first()))}}else{let t=this.findElementBySelectors(e.selectors,s);t&&(this.prepareComponentElement(e.componentKey,e.element,t.first()),e.element.replaceWith(t.first()))}let n=this.getProductsElement();if(n&&n.length||(n=this.findContainerElementForProducts(this.app.bodyElement)),n){let e=this.findElementBySelectors(this.getProductsSelectors(),s);e&&e.length||(e=this.findContainerElementForProducts(s)),e?(this.options.get("multipleContainersForProducts")&&e.length>1&&e.length==n.length?e.each((e,t)=>{jQuery(n.get(e)).replaceWith(jQuery(t))}):(e=e.first(),n.replaceWith(e)),this.setProductsElement(e),this.updateImageHeightForSafari()):n.html("")}this.attachEventsToPageParts(this.eventManager),"yes"==window.WCPFData.scrollTop&&this.productsElement&&jQuery("html,body").stop().animate({scrollTop:this.productsElement.offset().top-jQuery(window).height()/3.5},500,"swing")}findContainerElementForProducts(e){let t=[],n=[e.find(".product.type-product").filter('[class^="post-"],[class*=" post-"]'),e.find(".product-category.product")];for(let e in n){if(!n.hasOwnProperty(e))continue;let s=n[e];s.length&&s.each((e,n)=>{let s=jQuery(n).parent(),o=!1;for(let e in t)if(t.hasOwnProperty(e)&&jQuery(t[e]).is(s)){o=!0;break}o||t.push(s.get(0))})}return t.length?jQuery(t):null}updateImageHeightForSafari(){let e=this.getProductsElement();e&&e.find("img").each((e,t)=>{t.outerHTML=t.outerHTML})}onPaginationClick(e){e.preventDefault();let n=(0,t.Z)(e.currentTarget).attr("href");n&&this.project.goToPageNumberByUrl(n)}onSortingChange(e){let n=(0,t.Z)(e.currentTarget).val();n&&this.project.applySortingToProducts(n)}onSortingSubmit(e){e.preventDefault()}findElementBySelectors(e,n){for(let s of e.values()){let o=n?n.find(s):(0,t.Z)(s);if(o.length)return o}return null}}class S extends s.Z{attachEvents(e){e.addSystemHandler(this.filterPackage.initFilterEvent,this.initFilter)}initFilter(e){e.component.set("Project",A)}}class M extends n{initialProperties(){this.app.packageRegister.set("Project/Package",this)}getInitialSubpackages(){return[new C]}getInitialComponents(){return[new S]}}m=e(694);class T extends s.Z{initialProperties(){this.app.componentRegister.set("Filter/Dispatcher",this)}attachEvents(e){e.addWindowHandler("load",this.onWindowLoaded)}expansionSupport(){if(Array.prototype.hasOwnProperty("compare")){let e=Array.prototype.compare;delete Array.prototype.compare,Object.defineProperty(Array.prototype,"compare",{value:e,enumerable:!1})}}onWindowLoaded(){this.expansionSupport();let t=window.WCPFData;this.app.objectContainer.set("IsPaged",t.isPaged),this.app.objectContainer.set("Messages",t.messages),this.app.objectContainer.set("Selectors",t.selectors),this.app.objectContainer.set("PageUrl",t.pageUrl),this.app.objectContainer.set("WooData",{priceFormat:t.priceFormat});for(let n in t.registerEntities){if(!t.registerEntities.hasOwnProperty(n))continue;let e=t.registerEntities[n];this.register.entityTypes.set(n,{id:e.id,label:e.label,isGrouped:e.is_grouped,defaultOptions:e.default_options})}this.filterPackage.initFilterEvent.trigger(this.prototypes)}loadProject(e){let n=this.entityCollector.collectEntityByStructure(e);if(this.register.components.has(e.entityId))return;let t=new m.Z;t.projectComponent=this.builders.component.createComponent(n,t),this.assignDocumentElementForFilterComponent(t.projectComponent),this.builders.component.implementationComponent(t.projectComponent),this.componentBuilder.implementation(t,this.package),t.initEvent.trigger(t)}assignDocumentElementForFilterComponent(e){e.componentElement=this.app.bodyElement.find(`.wcpf-front-element-${e.entity.entityId}`);for(let t in e.childFilterComponents)e.childFilterComponents.hasOwnProperty(t)&&this.assignDocumentElementForFilterComponent(e.childFilterComponents[t])}}class z extends s.Z{initialProperties(){this.app.componentRegister.set("Filter/Builder/Component",this)}attachEvents(){}createComponent(e,t){if(!this.prototypes.component.has(e.entityKey))throw new Error(`Component prototype by entity key '${e.entityKey}' not found`);let s=this.prototypes.component.get(e.entityKey),n=this.componentBuilder.build(s);n.entity=e,n.project=t;for(let s in e.childEntities){if(!e.childEntities.hasOwnProperty(s))continue;let o=e.childEntities[s];n.childFilterComponents.push(this.createComponent(o,t))}return this.register.components.set(e.entityId,n),n}implementationComponent(e){this.componentBuilder.implementation(e,this.package);for(let t in e.childFilterComponents)e.childFilterComponents.hasOwnProperty(t)&&this.implementationComponent(e.childFilterComponents[t])}}class y extends n{constructor(){super(...arguments),this.initFilterEvent=new l.Z}initialProperties(){this.app.objectContainer.set("ProductsQueryVars",new Map),this.app.objectContainer.set("ProductsLoopProperties",new Map),this.app.packageRegister.set("Filter/Package",this),this.app.objectContainer.set("Filter/Components",new Map),this.app.objectContainer.set("Filter/Component/Prototypes",new Map)}getInitialSubpackages(){return[new M]}getInitialComponents(){return[new T,new z]}}const N=class extends r{getFilterKeysList(){return Object.values(this.getFilterKeys())}getFilterKeyByIndex(e){let t=this.getFilterKeys();return t.hasOwnProperty(e)?t[e]:null}applyFilterValue(e,t){this.project.applyFilterValue(this,e,t)}removeFilterValue(e){this.project.removeFilterValue(this,e)}},i=class extends N{getFieldKey(){return this.getFilterKeys().field}getFilterKeys(){return{field:this.options.get("optionKey")}}updateValueFromElement(e){let n=this.getFieldKey();"string"==typeof e&&(n=e);let t=this.getDocumentElementValue(n);Array.isArray(t)&&!t.length||t==null||"string"==typeof t&&!t.length?this.removeFilterValue(n):this.applyFilterValue(n,t)}resetDocumentElementValue(e){this.setDocumentElementValue(e,null)}initialPropertiesOfElement(){super.initialPropertiesOfElement(),this.componentState.has("box")?"hide"==this.componentState.get("box")?(this.componentElement.addClass("wcpf-box-hide"),this.componentElement.find(".wcpf-content").slideUp(0)):(this.componentElement.removeClass("wcpf-box-hide"),this.componentElement.find(".wcpf-content").slideDown(0)):this.componentElement.hasClass("wcpf-box-style")&&this.componentElement.hasClass("wcpf-box-hide")&&this.componentElement.find(".wcpf-content").slideUp(300),this.componentElement.hasClass("wcpf-hierarchical-collapsed")&&this.componentElement.find(".wcpf-item-hierarchical-collapsed").each((e,t)=>{let n=jQuery(t),s="boxItem_"+n.data("item-key"),o=n.hasClass("wcpf-item-box-hide");this.componentState.has(s)&&"hide"!=this.componentState.get(s)&&o?(n.removeClass("wcpf-item-box-hide"),n.find(".wcpf-item-children-container:first").slideDown(0)):n.find(".wcpf-item-children-container:first").css({display:o?"none":"block"})}),this.componentElement.hasClass("wcpf-scrollbar")?this.componentElement.each((e,t)=>{let s=jQuery(t),o=s.find(".wcpf-content"),n="maxHeight_"+e;if(this.componentState.has(n))o.css({maxHeight:this.componentState.get(n)+"px"});else{let e=this.options.get("heightOfVisibleContent");(!e||e<=0)&&(e=12);let t=s.find(".wcpf-item-label:first").actual("height")*e;t+=2,o.css({maxHeight:t+"px"}),this.componentState.set(n,t)}}):this.componentElement.hasClass("wcpf-contain-more-button")&&!this.componentState.get("showMoreContent")&&this.componentElement.each((e,t)=>{let o=jQuery(t),n=this.options.get("heightOfVisibleContent"),i=o.find(".wcpf-item"),a=o.find(".wcpf-more-button");(!n||n<=0)&&(n=12);let s=1;i.each((e,t)=>{let o=jQuery(t);o.parents(".wcpf-item.wcpf-item-box-hide").length||(s>n&&o.addClass("wcpf-more-item wcpf-item-hide"),s++)}),s>n&&a.addClass("wcpf-status-active")})}attachElementEvents(e){super.attachElementEvents(e),this.componentElement.hasClass("wcpf-box-style")&&e.addElementHandler(this.componentElement,"click",".wcpf-heading-label",this.onBoxToggleClick),this.componentElement.hasClass("wcpf-hierarchical-collapsed")&&e.addElementHandler(this.componentElement.find([".wcpf-item-hierarchical-collapsed > .wcpf-item-inner > .wcpf-item-label .wcpf-title-container",".wcpf-item-hierarchical-collapsed > .wcpf-item-inner > .wcpf-item-label .box-item-toggle"].join(",")),"click",this.onItemBoxToggleClick),this.componentElement.hasClass("wcpf-contain-more-button")&&e.addElementHandler(this.componentElement.find(".wcpf-more-button"),"click",this.onMoreButtonClick)}onMoreButtonClick(e){let t=jQuery(e.currentTarget).parents(".wcpf-front-element:first"),n=t.find(".wcpf-more-item");t.hasClass("wcpf-hide-more-items")?n.addClass("wcpf-item-hide"):n.removeClass("wcpf-item-hide"),t.toggleClass("wcpf-hide-more-items"),this.componentState.set("showMoreContent",t.hasClass("wcpf-hide-more-items"))}onItemBoxToggleClick(e){let n=(0,t.Z)(e.currentTarget).parents(".wcpf-item-hierarchical-collapsed:first"),s="boxItem_"+n.data("item-key");n.hasClass("wcpf-item-box-hide")?(n.find(".wcpf-item-children-container:first").slideDown(300),this.componentState.set(s,"show")):(n.find(".wcpf-item-children-container:first").slideUp(300),this.componentState.set(s,"hide")),n.toggleClass("wcpf-item-box-hide")}onBoxToggleClick(){this.componentElement.toggleClass("wcpf-box-hide"),this.componentElement.hasClass("wcpf-box-hide")?(this.componentElement.find(".wcpf-content").slideUp(300),this.componentState.set("box","hide")):(this.componentElement.find(".wcpf-content").slideDown(300),this.componentState.set("box","show"))}};class o{constructor(e){this.mark="",e&&(e.hasOwnProperty("filterComponent")&&(this.filterComponent=e.filterComponent),e.hasOwnProperty("filterValue")&&(this.filterValue=e.filterValue),e.hasOwnProperty("text")&&(this.text=e.text),e.hasOwnProperty("mark")&&(this.mark=e.mark))}}class P extends i{get itemElements(){return this.activeComponentElement.find(".wcpf-checkbox-item")}attachElementEvents(e){super.attachElementEvents(e);let t=[];this.componentElement.hasClass("wcpf-hierarchical-collapsed")?(t.push(".wcpf-checkbox-item.wcpf-item-hierarchical-collapsed:not(.disabled) > .wcpf-item-inner > .wcpf-item-label .wcpf-input-container"),t.push(".wcpf-checkbox-item:not(.disabled,.wcpf-item-hierarchical-collapsed)> .wcpf-item-inner > .wcpf-item-label")):t.push(".wcpf-checkbox-item:not(.disabled) .wcpf-checkbox-label"),e.addElementHandler(this.componentElement.find(t.join(",")),"click",this.onLabelClick)}onLabelClick(e){let s=(0,t.Z)(e.currentTarget),n=s.parents(".wcpf-checkbox-item:first");n.toggleClass("checked"),s.find(".wcpf-input").prop("checked",n.hasClass("checked")),n.parents(".wcpf-checkbox-item.checked").each(this.uncheckElement),n.find(".wcpf-checkbox-item.checked").each(this.uncheckElement),this.updateValueFromElement(this.getFieldKey())}uncheckElement(e,t){let n=jQuery(t),s=n.data("item-key");n.removeClass("checked"),n.find(`.wcpf-input[value="${s}"]`).prop("checked",!1)}setDocumentElementValue(e,t){if(t==null&&(t=""),this.itemElements.find(".wcpf-input").prop("checked",!1),this.itemElements.filter(".checked").removeClass("checked"),"string"==typeof t&&(t=[t]),Array.isArray(t))for(let n of t){let e=this.itemElements.find(`.wcpf-input[value="${n}"]`),s=e.parents(".wcpf-checkbox-item:first");e.prop("checked",!0),s.addClass("checked")}}getDocumentElementValue(){let n=[];return this.itemElements.filter(".checked").each((e,s)=>{let o=(0,t.Z)(s);n.push(o.data("item-key"))}),n}removeFilterValueByFilterNote(e){let t=this.getDocumentElementValue(this.getFieldKey()),n=t.indexOf(e.filterValue);-1!=n&&(t.splice(n,1),this.setDocumentElementValue(this.getFieldKey(),t),t.length?this.applyFilterValue(this.getFieldKey(),t):this.removeFilterValue(this.getFieldKey()))}collectFilterNotes(e){let n=[];if("string"==typeof e&&(e=[e]),Array.isArray(e))for(let t of e.values()){let s=this.itemElements.filter(`[data-item-key="${t}"]`),i=s.find(".wcpf-checkbox-label:first");s.length&&i.length&&n.push(new o({filterComponent:this,filterValue:t,text:i.find(".wcpf-title").html()}))}return n}}class H extends s.Z{attachEvents(e){e.addSystemHandler(this.filterPackage.initFilterEvent,this.initFilter)}initFilter(e){e.component.set("CheckBoxListField",P)}}class I extends n{getInitialComponents(){return[new H]}}class B extends i{get itemElements(){return this.activeComponentElement.find(".wcpf-radio-item")}initialProperties(){super.initialProperties()}attachElementEvents(e){super.attachElementEvents(e);let t=[];this.componentElement.hasClass("wcpf-hierarchical-collapsed")?(t.push(".wcpf-radio-item.wcpf-item-hierarchical-collapsed:not(.disabled) > .wcpf-item-inner > .wcpf-item-label .wcpf-input-container"),t.push(".wcpf-radio-item:not(.disabled,.wcpf-item-hierarchical-collapsed)> .wcpf-item-inner > .wcpf-item-label")):t.push(".wcpf-radio-item:not(.disabled) .wcpf-radio-label"),e.addElementHandler(this.componentElement.find(t.join(",")),"click",this.onLabelClick)}onLabelClick(e){let n=(0,t.Z)(e.currentTarget),s=n.parents(".wcpf-radio-item:first");this.itemElements.find(".wcpf-input").prop("checked",!1),this.itemElements.filter(".checked").removeClass("checked"),n.find(".wcpf-input").prop("checked",!0),s.addClass("checked"),this.updateValueFromElement(this.getFieldKey())}setDocumentElementValue(e,t){t==null&&(t=""),this.itemElements.find(".wcpf-input").prop("checked",!1),this.itemElements.filter(".checked").removeClass("checked");let n=this.itemElements.filter(`[data-item-key="${t}"]`);n.find(".wcpf-input:first").prop("checked",!0),n.addClass("checked")}getDocumentElementValue(){return this.itemElements.filter(".checked").data("item-key")}removeFilterValueByFilterNote(){this.resetDocumentElementValue(this.getFieldKey()),this.removeFilterValue(this.getFieldKey())}collectFilterNotes(e){let n=[];if(e!=null&&"string"==typeof e){let t=this.itemElements.filter(`[data-item-key="${e}"]`),s=t.find(".wcpf-radio-label:first");if(!t.length)return n;n.push(new o({filterComponent:this,filterValue:e,text:s.find(".wcpf-title").html()}))}return n}}class V extends s.Z{attachEvents(e){e.addSystemHandler(this.filterPackage.initFilterEvent,this.initFilter)}initFilter(e){e.component.set("RadioListField",B)}}class $ extends n{getInitialComponents(){return[new V]}}class W extends i{get inputElement(){return this.activeComponentElement.find(".wcpf-input")}initialPropertiesOfElement(){super.initialPropertiesOfElement();let e=this.componentElement.find(".wcpf-drop-down-style-woocommerce");jQuery.fn.hasOwnProperty("selectWoo")&&e.selectWoo({minimumResultsForSearch:5,width:"100%",allowClear:!1,placeholder:this.options.get("titleItemReset"),language:{noResults:()=>this.localizedMessages.selectNoMatchesFound}})}attachElementEvents(e){super.attachElementEvents(e),e.addElementHandler(this.componentElement.find(".wcpf-input"),"change",this.updateValueFromElement)}setDocumentElementValue(e,t){t==null&&(t=""),this.inputElement.val(t)}getDocumentElementValue(){return this.inputElement.val()}removeFilterValueByFilterNote(){this.resetDocumentElementValue(this.getFieldKey()),this.removeFilterValue(this.getFieldKey())}collectFilterNotes(e){let n=[];if(e!=null&&"string"==typeof e){let t=this.inputElement.find(`option[value="${e}"]`);if(!t.length)return n;n.push(new o({filterComponent:this,filterValue:e,text:t.data("title")}))}return n}}class _ extends s.Z{attachEvents(e){e.addSystemHandler(this.filterPackage.initFilterEvent,this.initFilter)}initFilter(e){e.component.set("DropDownListField",W)}}class K extends n{getInitialComponents(){return[new _]}}class q extends r{attachElementEvents(e){super.attachElementEvents(e),e.addElementHandler(this.componentElement,"click",".wcpf-button",this.onButtonClick)}onButtonClick(e){e.preventDefault(),e.detail&&1==e.detail&&document.activeElement.blur();let t=this.options.get("action");"filter"==t?this.project.applyFilters():"reset"==t&&this.project.resetFilters()}}class Y extends s.Z{attachEvents(e){e.addSystemHandler(this.filterPackage.initFilterEvent,this.initFilter)}initFilter(e){e.component.set("ButtonField",q)}}class G extends n{getInitialComponents(){return[new Y]}}class X extends i{get minInputElement(){return this.activeComponentElement.find(".wcpf-min-input")}get maxInputElement(){return this.activeComponentElement.find(".wcpf-max-input")}get sliderElement(){return this.componentElement.find(".priceSliderInput")}get labelElement(){return this.componentElement.find(".priceLabel")}getFilterKeys(){let e={};return"dash"==this.options.get("optionKeyFormat")?e.price=this.options.get("optionKey"):"two"==this.options.get("optionKeyFormat")&&(e.minPrice=this.options.get("minPriceOptionKey"),e.maxPrice=this.options.get("maxPriceOptionKey")),e}initialPropertiesOfElement(){super.initialPropertiesOfElement(),this.sliderElement.show(),this.componentElement.hasClass("wcpf-display-price-label")&&this.labelElement.show();let n=parseFloat(this.minInputElement.data("min")),s=parseFloat(this.maxInputElement.data("max")),e=parseFloat(this.minInputElement.val()),t=parseFloat(this.maxInputElement.val());this.sliderElement.slider({range:!0,animate:!0,min:n,max:s,values:[e,t],stop:(0,c.Z)(this.onSlideStop,this),slide:(0,c.Z)(this.onSlideMove,this)}),this.setPriceLabel(e,t),this.componentElement.hasClass("wcpf-box-style")&&this.componentElement.hasClass("wcpf-box-hide")&&this.componentElement.find(".wcpf-content").slideUp(300)}attachElementEvents(e){super.attachElementEvents(e),this.attachMinMaxInputEvents(),this.eventManager.addElementHandler(this.componentElement,"keypress keyup blur",".wcpf-price-slider-min-max-inputs .wcpf-input",this.onMinMaxInputKeyChange)}attachMinMaxInputEvents(){this.eventManager.addElementHandler(this.componentElement,"change",".wcpf-price-slider-min-max-inputs .wcpf-input",this.onMinMaxInputChange)}detachMinMaxInputEvents(){this.eventManager.removeElementHandler(this.componentElement,"change",".wcpf-price-slider-min-max-inputs .wcpf-input",this.onMinMaxInputChange)}resetDocumentElementValue(e){let t=parseFloat(this.minInputElement.data("min")),n=parseFloat(this.maxInputElement.data("max"));this.getFilterKeyByIndex("price")==e?this.setDocumentElementValue(e,t+"-"+n):this.getFilterKeyByIndex("minPrice")==e?this.setDocumentElementValue(e,t):this.getFilterKeyByIndex("maxPrice")==e&&this.setDocumentElementValue(e,n)}setDocumentElementValue(e,t){if(this.detachMinMaxInputEvents(),this.getFilterKeyByIndex("price")==e){let e=t.split("-");this.minInputElement.val(e[0]),e.length>1&&this.maxInputElement.val(e[1])}else this.getFilterKeyByIndex("minPrice")==e?this.minInputElement.val(t):this.getFilterKeyByIndex("maxPrice")==e&&this.maxInputElement.val(t);this.updateSliderRangeValue(),this.attachMinMaxInputEvents()}getDocumentElementValue(e){let t=this.getMinValue(),n=this.getMaxValue();return this.getFilterKeyByIndex("price")==e?t+"-"+n:this.getFilterKeyByIndex("minPrice")==e?t:this.getFilterKeyByIndex("maxPrice")==e?n:""}updateSliderRangeValue(){let e=parseFloat(this.minInputElement.val()),t=parseFloat(this.maxInputElement.val());this.sliderElement.slider("values",[e,t]),this.setPriceLabel(e,t)}onMinMaxInputKeyChange(e){let t=jQuery(e.currentTarget),n=t.val();this.detachMinMaxInputEvents(),t.val(n.replace(/[^\d].+/,"")),(e.which<48||e.which>57)&&e.preventDefault(),this.attachMinMaxInputEvents()}onMinMaxInputChange(e){let n=jQuery(e.currentTarget),t=null;"dash"==this.options.get("optionKeyFormat")?t=this.getFilterKeyByIndex("price"):"two"==this.options.get("optionKeyFormat")&&(t=n.hasClass("wcpf-min-input")?this.getFilterKeyByIndex("minPrice"):this.getFilterKeyByIndex("maxPrice")),this.updateSliderRangeValue(),t&&this.applyFilterValue(t,this.getDocumentElementValue(t))}onSlideMove(e,t){this.minInputElement.val(t.values[0]),this.maxInputElement.val(t.values[1]),this.updateSliderRangeValue()}onSlideStop(e,t){let n=null;"dash"==this.options.get("optionKeyFormat")?n=this.getFilterKeyByIndex("price"):"two"==this.options.get("optionKeyFormat")&&(n=jQuery(t.handle).is(":last-child")?this.getFilterKeyByIndex("maxPrice"):this.getFilterKeyByIndex("minPrice")),n&&this.applyFilterValue(n,this.getDocumentElementValue(n))}getPriceText(e){return window.accounting.formatMoney(e,{symbol:this.wooData.priceFormat.currencyFormatSymbol,decimal:this.wooData.priceFormat.currencyFormatDecimalSep,thousand:this.wooData.priceFormat.currencyFormatThousandSep,precision:this.wooData.priceFormat.currencyFormatNumDecimals,format:this.wooData.priceFormat.currencyFormat})}setPriceLabel(e,t){window.accounting,this.labelElement.find(".from").html(this.getPriceText(e)),this.labelElement.find(".to").html(this.getPriceText(t))}removeFilterValueByFilterNote(){for(let e of this.getFilterKeysList())this.resetDocumentElementValue(e),this.removeFilterValue(e)}getMaxValue(){let e=this.maxInputElement.val();return""==e&&(e=this.maxInputElement.data("max")),e}getMinValue(){let e=this.minInputElement.val();return""==e&&(e=this.minInputElement.data("min")),e}collectFilterNotes(e){let n=[];if(e!=null&&"string"==typeof e){let t=this.getMinValue(),s=this.getMaxValue();n.push(new o({filterComponent:this,filterValue:e,text:this.getPriceText(t)+" - "+this.getPriceText(s)}))}return n}}class Q extends s.Z{attachEvents(e){e.addSystemHandler(this.filterPackage.initFilterEvent,this.initFilter)}initFilter(e){e.component.set("PriceSliderField",X)}}class Z extends n{getInitialComponents(){return[new Q]}}class J extends i{get itemElements(){return this.activeComponentElement.find(".wcpf-box-item")}attachElementEvents(e){super.attachElementEvents(e),e.addElementHandler(this.componentElement.find(".wcpf-box-item:not(.disabled)"),"click",this.onClickItem)}onClickItem(e){let n=(0,t.Z)(e.currentTarget);this.options.get("multiSelect")||this.itemElements.filter(".selected").not(`[data-value="${n.data("value")}"]`).removeClass("selected"),n.toggleClass("selected"),this.updateValueFromElement(this.getFieldKey())}setDocumentElementValue(e,t){if(t==null&&(t=""),this.itemElements.filter(".selected").removeClass("selected"),"string"==typeof t&&(t=[t]),Array.isArray(t))for(let e of t)this.itemElements.filter(`[data-value="${e}"]`).addClass("selected")}getDocumentElementValue(){let n=[];return this.itemElements.filter(".selected").each((e,s)=>{let o=(0,t.Z)(s);n.push(o.data("value"))}),n}removeFilterValueByFilterNote(e){let t=this.getDocumentElementValue(this.getFieldKey()),n=t.indexOf(e.filterValue);-1!=n&&(t.splice(n,1),this.setDocumentElementValue(this.getFieldKey(),t),t.length?this.applyFilterValue(this.getFieldKey(),t):this.removeFilterValue(this.getFieldKey()))}collectFilterNotes(e){let n=[];if("string"==typeof e&&(e=[e]),Array.isArray(e))for(let t of e.values()){let s=this.itemElements.filter(`[data-value="${t}"]`),i=s.find(".wcpf-title");s.length&&i.length&&n.push(new o({filterComponent:this,filterValue:t,text:i.html()}))}return n}}class ee extends s.Z{attachEvents(e){e.addSystemHandler(this.filterPackage.initFilterEvent,this.initFilter)}initFilter(e){e.component.set("BoxListField",J)}}class te extends n{getInitialComponents(){return[new ee]}}class ne extends i{get itemElements(){return this.activeComponentElement.find(".wcpf-text-item")}attachElementEvents(e){super.attachElementEvents(e),e.addElementHandler(this.componentElement.find(".wcpf-text-item:not(.disabled) .wcpf-text-label"),"click",this.onLabelClick)}onLabelClick(e){let t=jQuery(e.currentTarget).parents(".wcpf-text-item:first");this.options.get("multiSelect")||this.itemElements.filter(".selected").not(`[data-value="${t.data("value")}"]`).removeClass("selected"),t.toggleClass("selected"),t.parents(".wcpf-text-item.selected").each(this.uncheckElement),t.find(".wcpf-text-item.selected").each(this.uncheckElement),this.updateValueFromElement(this.getFieldKey())}uncheckElement(e,t){let n=jQuery(t),s=n.data("value");n.removeClass("selected"),n.find(`.wcpf-input[value="${s}"]`).prop("checked",!1)}setDocumentElementValue(e,t){if(t==null&&(t=""),this.itemElements.filter(".selected").removeClass("selected"),"string"==typeof t&&(t=[t]),Array.isArray(t))for(let e of t)this.itemElements.filter(`[data-value="${e}"]`).addClass("selected")}getDocumentElementValue(){let n=[];return this.itemElements.filter(".selected").each((e,s)=>{let o=(0,t.Z)(s);n.push(o.data("value"))}),n}removeFilterValueByFilterNote(e){let t=this.getDocumentElementValue(this.getFieldKey()),n=t.indexOf(e.filterValue);-1!=n&&(t.splice(n,1),this.setDocumentElementValue(this.getFieldKey(),t),t.length?this.applyFilterValue(this.getFieldKey(),t):this.removeFilterValue(this.getFieldKey()))}collectFilterNotes(e){let n=[];if("string"==typeof e&&(e=[e]),Array.isArray(e))for(let t of e.values()){let s=this.itemElements.filter(`[data-value="${t}"]`),i=s.find(".wcpf-title");i.length&&s.length&&n.push(new o({filterComponent:this,filterValue:t,text:i.html()}))}return n}}class se extends s.Z{attachEvents(e){e.addSystemHandler(this.filterPackage.initFilterEvent,this.initFilter)}initFilter(e){e.component.set("TextListField",ne)}}class oe extends n{getInitialComponents(){return[new se]}}class ie extends i{get itemElements(){return this.activeComponentElement.find(".wcpf-color-item")}attachElementEvents(e){super.attachElementEvents(e),e.addElementHandler(this.componentElement.find(".wcpf-color-item:not(.disabled)").filter(":not(.disabled)"),"click",this.onClickItem)}onClickItem(e){let n=(0,t.Z)(e.currentTarget);this.options.get("multiSelect")||this.itemElements.filter(".selected").not(`[data-value="${n.data("value")}"]`).removeClass("selected"),n.toggleClass("selected"),this.updateValueFromElement(this.getFieldKey())}setDocumentElementValue(e,t){if(t==null&&(t=""),this.itemElements.filter(".selected").removeClass("selected"),"string"==typeof t&&(t=[t]),Array.isArray(t))for(let e of t)this.itemElements.filter(`[data-value="${e}"]`).addClass("selected")}getDocumentElementValue(){let n=[];return this.itemElements.filter(".selected").each((e,s)=>{let o=(0,t.Z)(s);n.push(o.data("value"))}),n}removeFilterValueByFilterNote(e){let t=this.getDocumentElementValue(this.getFieldKey()),n=t.indexOf(e.filterValue);-1!=n&&(t.splice(n,1),this.setDocumentElementValue(this.getFieldKey(),t),t.length?this.applyFilterValue(this.getFieldKey(),t):this.removeFilterValue(this.getFieldKey()))}collectFilterNotes(e){let n=[];if("string"==typeof e&&(e=[e]),Array.isArray(e))for(let t of e.values()){let s=this.itemElements.filter(`[data-value="${t}"]`),i=s.data("title");s.length&&i&&n.push(new o({filterComponent:this,filterValue:t,text:i}))}return n}}class ae extends s.Z{attachEvents(e){e.addSystemHandler(this.filterPackage.initFilterEvent,this.initFilter)}initFilter(e){e.component.set("ColorListField",ie)}}class re extends n{getInitialComponents(){return[new ae]}}class ce extends n{getInitialSubpackages(){return[new I,new $,new K,new G,new Z,new te,new oe,new re]}getInitialComponents(){return[]}}class le extends s.Z{attachEvents(e){e.addSystemHandler(this.filterPackage.initFilterEvent,this.initFilter)}initFilter(e){e.component.set("ColumnsLayout",r)}}class de extends n{getInitialComponents(){return[new le]}}class ue extends r{initialPropertiesOfElement(){super.initialPropertiesOfElement(),this.componentState.has("box")?"hide"==this.componentState.get("box")?(this.componentElement.addClass("wcpf-box-hide"),this.componentElement.find(".wcpf-content:first").slideUp(0)):(this.componentElement.removeClass("wcpf-box-hide"),this.componentElement.find(".wcpf-content:first").slideDown(0)):this.componentElement.hasClass("wcpf-box-style")&&this.componentElement.hasClass("wcpf-box-hide")&&this.componentElement.find(".wcpf-content:first").slideUp(300)}attachElementEvents(e){super.attachElementEvents(e),this.componentElement.hasClass("wcpf-box-style")&&e.addElementHandler(this.componentElement,"click",".wcpf-heading-label:first",this.onBoxToggleClick)}onBoxToggleClick(){this.componentElement.toggleClass("wcpf-box-hide"),this.componentElement.hasClass("wcpf-box-hide")?(this.componentElement.find(".wcpf-content:first").slideUp(300),this.componentState.set("box","hide")):(this.componentElement.find(".wcpf-content:first").slideDown(300),this.componentState.set("box","show"))}}class he extends s.Z{attachEvents(e){e.addSystemHandler(this.filterPackage.initFilterEvent,this.initFilter)}initFilter(e){e.component.set("SimpleBoxLayout",ue)}}class me extends n{getInitialComponents(){return[new he]}}class fe extends n{getInitialSubpackages(){return[new de,new me]}getInitialComponents(){return[]}}let b=new class extends pe{initialization(){let e=new R,t=new L;this.objectContainer.set("ComponentBuilder",t),e.build(new F,this),e.build(new y,this),e.build(new ce,this),e.build(new fe,this)}};b.initialization(),window.wcpfFrontApp=b})()})()